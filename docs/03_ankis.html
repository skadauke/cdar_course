<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"> 
<head> 
  <title>Session 3</title> 
  <link rel="stylesheet" type="text/css" media="screen, projection, print" 
   href="https://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" /> 
  <script src="https://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js" 
   charset="utf-8" type="text/javascript"></script> 
</head>
<body>

<style type="text/css">
.card {
  font-family: Arial;
  font-size: 20px;
  line-height: 1.3em;
  margin: 30px 2px 10px 2px;
  text-align: center;
  color: black;
  background-color: white;
}

code, pre, .c {
  font-family: monospace;
  padding: 0.2em 0em;
  margin: 0px;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
  /* Overwrite ugly slidy CSS code */
  font-weight: normal;
  line-height: 1.3em;
  border-style: none;
  color: black;
}

.extra {
  border: 2px solid #a1a1a1;
  padding: 10px 40px;
  background: #f3f4f8;
  border-radius: 5px;
  box-shadow: 2px 2px 2px #cccccc;
  font-size: 80%;
}

/* Resize large pictures to fit inside div */
img {
  max-width: 100%;
  height: auto;
}

img[src*="latex"] {
    vertical-align: middle;
}

.cloze {
 font-weight: bold;
 color: blue;
}

.highlight {
    background: #ffffff; 
    font-size: 85%;
}

@media print {
  @page {
    /* Hide page header and footer */
    margin: 0;
    size: 3in 5in landscape;
  }
  
  /* Do not show answers on print-outs */
  div.incremental {
    display: none;
  }
}
</style>

<div class="slide cover">
  <br><br>
  <h1>Session 3 - Data Frames</h1>
</div>


<div class="slide">
  <div class="card">R: the two "<b>rectangular</b>" data types in R are the <b>matrix</b>&nbsp;and the <b>data frame</b>. What is the most important difference between the two?</div>
  <div class="incremental">
    <div class="card"><hr><b>Matrices </b>can only contain a <b>single class of data</b>&nbsp;while <b>data frames </b>can store <b>many classes of data</b>.    <br><br> <div class="extra">To be more precise, each <b>column</b>&nbsp;of a <b>data frame</b> may only consist of a single type of data. However <b>columns of different data types can be mixed</b>.<div><br /></div><div><img src="03_ankis_files/paste-2495375999398.jpg" /></div><div><br /></div><div>Technically, a data frame is a <b>special list</b>&nbsp;of vectors that <b>all have the same length</b>.&nbsp;</div></div></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have four vectors <code class="myCodeClass">name</code>, <code class="myCodeClass">age</code>, <code class="myCodeClass">height</code>, and <code class="myCodeClass">weight</code>:&nbsp;<div><br /></div><div><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">name <span style="color: #666666">&lt;-</span> <span style="color: #B00040">c</span>(<span style="color: #BA2121">"Bill"</span>, <span style="color: #BA2121">"Gina"</span>, <span style="color: #BA2121">"Kelly"</span>, <span style="color: #BA2121">"Sean"</span>)<br />age <span style="color: #666666">&lt;-</span> <span style="color: #B00040">c</span>(<span style="color: #666666">25</span>, <span style="color: #666666">28</span>, <span style="color: #666666">26</span>, <span style="color: #666666">38</span>)<br />height <span style="color: #666666">&lt;-</span> <span style="color: #B00040">c</span>(<span style="color: #666666">181</span>, <span style="color: #666666">160</span>, <span style="color: #666666">171</span>, <span style="color: #666666">168</span>)<br />weight <span style="color: #666666">&lt;-</span> <span style="color: #B00040">c</span>(<span style="color: #666666">105</span>, <span style="color: #666666">60</span>, <span style="color: #666666">75</span>, <span style="color: #666666">80</span>)   </pre></div> </td></tr></tbody></table></center></div><div><br /></div><div>combine these vectors into a data frame called <code class="myCodeClass">patients</code>.&nbsp;</div></div>
  <div class="incremental">
    <div class="card"><hr><center></center><center></center><center></center><center></center><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">patients <span style="color: #666666">&lt;-</span> <span style="color: #B00040">data.frame</span>(name, age, height, weight) </pre></div> </td></tr></tbody></table></center>     <br><br> <div class="extra">The function <code class="myCodeClass">data.frame()</code> creates data frames from the vectors supplied as its arguments. Each <b>vector</b>&nbsp;will be a&nbsp;<b>column</b>&nbsp;in the resulting data frame.</div></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame <code class="myCodeClass">patients</code> with columns representing the patient name, age, height, and weight, but the data frame does not have column names.&nbsp;<div><br /></div><div>Supply the following column names to <code class="myCodeClass">patients</code>: <code class="myCodeClass">"name"</code>, <code class="myCodeClass">"age"</code>, <code class="myCodeClass">"height"</code>, and <code class="myCodeClass">"weight"</code>.</div></div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000">colnames</span>(patients) <span style="color: #666666">&lt;-</span>  <span style="color: #B00040">  c</span>(<span style="color: #BA2121">"name"</span>, <span style="color: #BA2121">"age"</span>, <span style="color: #BA2121">"height"</span>, <span style="color: #BA2121">"weight"</span>) </pre></div> </td></tr></tbody></table></center>    <br><br> <div class="extra">The <code class="myCodeClass">colnames()</code> function can be used to set or rename column names of a data frame, which is often useful.&nbsp;<div><br /></div><div>The syntax is<div><br /></div><div><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000">colnames</span>(df) <span style="color: #666666">&lt;-</span> cnames </pre></div> </td></tr></tbody></table></center></div><div><br /></div><div>Where <code class="myCodeClass">df</code> is a data frame and <code class="myCodeClass">cnames</code> is a character vector of the same length as the number of columns of <code class="myCodeClass">df</code>.</div></div></div></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame <code class="myCodeClass">patients</code>. Find the number of rows of <code class="myCodeClass">patients</code>.</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000">nrow</span>(patients) </pre></div> </td></tr></tbody></table></center></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>. Find the number of columns of&nbsp;<code class="myCodeClass">patients</code>.</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000">ncol</span>(patients) </pre></div> </td></tr></tbody></table></center></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>. Display the top few rows of <code class="myCodeClass">patients</code>.</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000">head</span>(patients)</pre></div></td></tr></tbody></table></center>    <br><br> <div class="extra">The <code class="myCodeClass">head()</code> and <code class="myCodeClass">tail()</code> functions are useful for inspecting data frames.&nbsp;<div><br /></div><div>By default, the top (or bottom) 6 lines are displayed, but this can be modified by supplying the optional argument <code class="myCodeClass">n</code>.&nbsp;</div><div><br /></div><div>The following example displays the first 20 rows of <code class="myCodeClass"> my_data</code>:<div><br /></div><div><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000">head</span>(patients, n<span style="color: #666666">=20</span>) </pre></div> </td></tr></tbody></table></center><br /></div></div></div></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>. Which command displays a concise statistical summary of each variable (e.g., minimum, quartiles, maximum, median, and mean)?</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000">summary</span>(patients) </pre></div> </td></tr></tbody></table></center>    <br><br> <div class="extra"><code class="myCodeClass"><div></div></code><img src="03_ankis_files/paste-5420248727743.jpg" /><br /><div><code class="myCodeClass"><br /></code></div><code class="myCodeClass">summary()</code> provides different output for each variable, depending on its class.&nbsp;<div><br /></div><div>For <b>numeric</b> data, <code class="myCodeClass">summary()</code> displays the <b>minimum</b>, <b>1st quartile</b>, <b>median</b>, <b>mean</b>, <b>3rd quartile</b>, and <b>maximum</b>. These values help us understand how the data are distributed.&nbsp;</div><div><br /></div><div>For <b>categorical</b> data (called <b>factor</b>&nbsp;variables in R), <code class="myCodeClass">summary()</code> displays the number of times each value (or <b>level</b>) occurs in the data.</div></div></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>. Which command displays a concise summary of the structure of the table (number and names of variables, number of observations)?</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">str(patients) </pre></div> </td></tr></tbody></table></center>    <br><br> <div class="extra"><img src="03_ankis_files/paste-6210522710163.jpg" /><br /><div><br /></div><div><code class="myCodeClass">str()</code>&nbsp;combines many of the features of the other functions for looking at data frames in a concise and readable format.</div><div><br /></div><div>At the very top, it tells us that the object&nbsp;<code class="myCodeClass">patients</code> is a&nbsp;<code class="myCodeClass">data.frame</code>&nbsp;and that it has 4 observations and 4 variables. It then gives us the name and type of each column, along with a preview of its contents.</div></div></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>. Retrieve the value stored in the 1st row of the 2nd column of <code class="myCodeClass">patients</code>.</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">patients[<span style="color: #666666">1</span>, <span style="color: #666666">2</span>] </pre></div> </td></tr></tbody></table></center>    <br><br> <div class="extra"><div>Similarly to vectors, data frames can be sliced with&nbsp;<b>index vectors in square brackets</b>.&nbsp;</div><div><br /></div><div>Since data frames are two-dimensional, <b>two index vectors need to be supplied</b>.&nbsp;</div><div><br /></div><div>The syntax is, for any data frame <code class="myCodeClass">x</code>:</div><div><br /></div><div><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x[<span style="color: #008000">row</span>, <span style="color: #008000">col</span>] </pre></div> </td></tr></tbody></table></center><br /></div><div>Where <code class="myCodeClass">df</code> is a data frame, and <code class="myCodeClass">row</code> and <code class="myCodeClass">col</code> are <b>index vectors</b>, which may be <b>numeric</b>, <b>negative numeric</b>, <b>logical</b>, or <b>named</b>.</div></div></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>. Retrieve the values in the 3rd row of&nbsp;<code class="myCodeClass">patients</code>.</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">patients[<span style="color: #666666">3</span>, ]</pre></div></td></tr></tbody></table></center>    <br><br> <div class="extra">Here we supply a <b>numeric index</b> for the <b>row</b> and leave the<b> column index empty</b>. This tells R that we want the values from all the columns.<div><br /></div><div><div>Note: don't forget to the comma after the row index!</div></div></div></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>. Retrieve the values in rows 2 through 4.</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">patients[<span style="color: #666666">2:4</span>, ] </pre></div> </td></tr></tbody></table></center></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>. Retrieve the values in the 1st and 3rd rows of&nbsp;<code class="myCodeClass">patients</code>.</div>
  <div class="incremental">
    <div class="card"><hr><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">patients[<span style="color: #B00040">c</span>(<span style="color: #666666">1</span>, <span style="color: #666666">3</span>), ]</pre></div></td></tr></tbody></table></center></div>
  </div>
</div>

<div class="slide">
  <div class="card">R: suppose you have a data frame&nbsp;<code class="myCodeClass">patients</code>&nbsp;with the following contents:<div><br /></div><div><img src="03_ankis_files/paste-9251359555706.jpg" /></div><div><br /></div><div>Extract a vector containing the <code class="myCodeClass">age</code>s of each patient and store it in the variable&nbsp;<code class="myCodeClass">my_ages</code>.</div></div>
  <div class="incremental">
    <div class="card"><hr><center style="text-align: -webkit-auto;"><center><table><tbody><tr><td><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">my_ages <span style="color: #666666">&lt;-</span> patients<font color="#ff0000">$</font>age </pre></div> </td></tr></tbody></table></center></center>    <br><br> <div class="extra">The <b>dollar operator</b>&nbsp;<code class="myCodeClass">`$`</code> <b>extracts a single column</b> from a <b>data frame</b> as a <b>vector</b>.&nbsp;<div><br /></div><div>This is a commonly used idiom, for example for summarizing a distribution of data or for plotting values.</div></div></div>
  </div>
</div>

</body>
</html>

